<!doctype html>
<html lang="en">

<head>
    <title>Pokemons details and statistics compare</title>
</head>

<body>

    <h1>Pokemons details and statistics compare: </h1>
    <label for="pokemon0">Choose pokemon 1:</label>

    <select name="pokemon0" id="pokemons0">
        <option value=""></option>
    </select>


    <label for="pokemon1">Choose pokemon 2:</label>
    <select name="pokemon1" id="pokemons1">
        <option value=""></option>
    </select>

    <button onclick="comparepokemons()">Compare</button>

    <h1 id="details"></h1>

    <p id="id0"></p>
    <p id="id1"></p>

    <p id="name0"></p>
    <p id="name1"></p>

    <p id="height0"></p>
    <p id="height1"></p>

    <p id="weight0"></p>
    <p id="weight1"></p>

    <p id="category0"></p>
    <p id="category1"></p>

    <p id="abilities0"></p>
    <p id="abilities1"></p>

    <p id="link"></p>

    <h1 id="statistics"></h1>

    <p id="hp0"></p>
    <p id="hp1"></p>
    <p id="attack0"></p>
    <p id="attack1"></p>
    <p id="defense0"></p>
    <p id="defense1"></p>
    <p id="specialattack0"></p>
    <p id="specialattack1"></p>
    <p id="specialdefense0"></p>
    <p id="specialdefense1"></p>
    <p id="speed0"></p>
    <p id="speed1"></p>

    <script>
        var dirurl = [localStorage.getItem("link"), localStorage.getItem("link2")];

        function comparepokemons() {
            var sel0 = document.getElementById('pokemons0');
            var sel1 = document.getElementById('pokemons1');
            dirurl = [sel0.value, sel1.value];
            fetchlinks();

        }

        function createlist(datalist) {
            console.log(datalist)

            let text = "";
            let text2 = "";


            for (let i = 0; i < datalist.results.length; i++) {
                text += '<option value="' + datalist.results[i].url + '">' + datalist.results[i].name + '</option>';
                text2 += '<option value="' + datalist.results[i].url + '">' + datalist.results[i].name + '</option>';
            }

            document.getElementById("pokemons0").innerHTML = text;
            document.getElementById("pokemons1").innerHTML = text;

        }


        function create(data, itemnum) {


            document.getElementById("details").innerHTML = 'Pokemons details: ';
            document.getElementById("id" + itemnum).innerHTML = 'Id: ' + data.id;
            document.getElementById("name" + itemnum).innerHTML = 'Name: ' + data.name;
            document.getElementById("height" + itemnum).innerHTML = 'Height: ' + data.height;
            document.getElementById("weight" + itemnum).innerHTML = 'Weight: ' + data.weight;
            document.getElementById("abilities" + itemnum).innerHTML = 'Ability: ' + data.abilities[0].ability.name;

            let text = "";


            document.getElementById("statistics").innerHTML = 'Pokemons statistics: ';
            for (let i = 0; i < data.stats.length; i++) {
                document.getElementById("hp" + itemnum).innerHTML = 'Hp: ' + data.stats[i].base_stat;
                document.getElementById("attack" + itemnum).innerHTML = 'attack: ' + data.stats[i].base_stat;
                document.getElementById("defense" + itemnum).innerHTML = 'defense: ' + data.stats[i].base_stat;
                document.getElementById("specialattack" + itemnum).innerHTML = 'specialattack: ' + data.stats[i].base_stat;
                document.getElementById("specialdefense" + itemnum).innerHTML = 'specialdefense: ' + data.stats[i].base_stat;
                document.getElementById("speed" + itemnum).innerHTML = 'speed: ' + data.stats[i].base_stat;
            }


        }


        fetch('https://pokeapi.co/api/v2/pokemon/?limit=100000&offset=0')
            .then(response => response.json())
            .then((datalist) => createlist(datalist))

        function fetchlinks() {
            for (let i = 0; i < dirurl.length; i++) {
                fetch(dirurl[i])
                    .then(response => response.json())
                    .then((data) => create(data, i))
            }
        }

    </script>

</body>

</html>